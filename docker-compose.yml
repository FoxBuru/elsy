go: &go
  build: dev-env
  volumes:
    - .:/go/src/stash0.eng.lancope.local/dev-infrastructure/project-lifecycle
  working_dir: /go/src/stash0.eng.lancope.local/dev-infrastructure/project-lifecycle
  environment:
    - GOOS
    - GOARCH
  entrypoint: /usr/local/go/bin/go

package:
  <<: *go
  environment:
    - GOOS=darwin
    - GOARCH=amd64
  command: ["build", "-v", "-o", "target/lc-darwin-amd64", "./main"]

test:
  <<: *go
  command: ["test", "-v", "./..."]
